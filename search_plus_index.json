{"./":{"url":"./","title":"facebook hermes ç¼–è¯‘","keywords":"","body":"åŸºæœ¬ç¯å¢ƒ # æŒ‰éœ€å®‰è£… brew install cmake git ninja # å‡†å¤‡workspace mkdir github_hermes_workspace cd github_hermes_workspace/ # ç¯å¢ƒå˜é‡ï¼Œå¾ˆé‡è¦ï¼Œç¼–è¯‘hermes.soæ—¶ï¼Œhermes/android/build.gradleå·¥ç¨‹ä¼šè¯»å–ä½¿ç”¨ export HERMES_WS_DIR=\"$(pwd)\" # cloneï¼Œä½œä¸ºworkspaceå­ç›®å½• git clone https://github.com/facebook/hermes.git github_hermes ç¼–è¯‘hermesc # æ„å»ºbuildç›®å½• ## ç”±äº hermes/android/build.gradle é‡Œå†™æ­»äº†è·¯å¾„ï¼ˆbuild|build_releaseï¼‰ï¼Œä¸æ”¹æºç çš„å‰æä¸‹å°±ç”¨å‰è¿°ä¸¤ä¸ªï¼š ## RELEASE: cmake -S github_hermes -B build_release -G Ninja -DCMAKE_BUILD_TYPE=Release cmake -S github_hermes -B build -G Ninja # build hermesc ## --build æŒ‡å®šçš„æ˜¯ä¸Šè¿°å‘½ä»¤çš„è¾“å‡ºè·¯å¾„ cmake --build ./build --target hermesc # hermescä½ç½®ï¼šä½äº --build æŒ‡å®šçš„ç›®å½•ä¸‹ find . | grep -E \"hermesc$\" ç¼–è¯‘hermes.so æŒ‡å®šNDKç‰ˆæœ¬ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œä¿è¯å’Œè¦ä½¿ç”¨hermesçš„å·¥ç¨‹çš„ç‰ˆæœ¬ä¸€è‡´ï¼ˆç›®å‰å·²å‘ç°çš„é—®é¢˜æ˜¯try-catchå¤±æ•ˆï¼‰ï¼Œæ–¹å¼ï¼š android.ndkVersion ï¼ˆéœ€è¦æ›´æ”¹hermes/android/hermes/build.gradleï¼‰ android.ndkPath ï¼ˆéœ€è¦æ›´æ”¹hermes/android/hermes/build.gradleï¼‰ ndk.dir @ local.properties ä¸€äº›è¯´æ˜ï¼š Intl è¡¨ç¤ºå›½é™…åŒ–ç‰ˆæœ¬ ä¸ç®¡æ˜¯debugè¿˜æ˜¯releaseçš„libhermes.soï¼ŒCMAKE_BUILD_TYPEéƒ½æ˜¯ä¸ºRelease JS developers aren't VM developers. Give them a faster build. releaseçš„å‚æ•°ï¼š HERMES_ENABLE_DEBUGGER=false // å³debugçš„soå¸¦inspector CMAKE_BUILD_TYPE=MinSizeRel æ··æ·†è§„åˆ™ï¼š -keep class com.facebook.hermes.unicode.** { *; } -keep class com.facebook.jni.** { *; } cd hermes/android/ chmod +x gradlew # buildç›®å½•åœ¨ ${HERMES_WS_DIR}/build_android/ ./gradlew build # soä½ç½®ï¼š cd $HERMES_WS_DIR find . | grep -E \"libhermes\\.so$\" jsè½¬hbc hermes -emit-binary -out test.hbc test.js è¿è¡ŒRN demo å‚è€ƒï¼šhttps://reactnative.dev/docs/environment-setup npx react-native init AwesomeProject npx react-native run-android æ›´å¤š https://hermesengine.dev/docs/cross-compilation ä½¿ç”¨Chromeè°ƒè¯•è¿è¡Œåœ¨hermesçš„JSä»£ç  "},"src/tips.html":{"url":"src/tips.html","title":"åˆ›åˆŠ Â· å·é¦–è¯­","keywords":"","body":"åŸºäº Gitbook 3.2.3 ä½†è°ˆä¸ä¸Šæ„Ÿè°¢ï¼Œæ¯«æ— æ–‡æ¡£å¯è¨€ğŸ™‚ è¨€å½’æ­£ä¼  å½“å‰ book ä½œä¸º linjiang.tech åšå®¢çš„è¡¥å……ï¼Œå……å½“ä¸€ä¸ªçŸ¥è¯†å°é›†é”¦çš„ä½œç”¨ã€‚ "},"src/apk-size-diff.html":{"url":"src/apk-size-diff.html","title":"raw size å’Œ download size çš„åŒºåˆ«","keywords":"","body":"å‚ç…§å®˜æ–¹æ–‡æ¡£ çš„è§£é‡Šï¼š Raw File Size è¡¨ç¤ºå®ä½“åœ¨ç£ç›˜ä¸Šæœªç»å‹ç¼©æ—¶çš„å¤§å°ï¼› Download Size åˆ™è¡¨ç¤ºå®ä½“ç”± Google Play æä¾›æ—¶ä¼°è®¡å‹ç¼©åçš„å¤§å°ï¼› è¿™æ˜¯å› ä¸ºç”Ÿæˆçš„ apk ä¸Šä¼ è‡³ google play åä¼šè¢«å†æ¬¡å¤„ç†ï¼ˆå‹ç¼©ï¼‰ä»¥å‡å°‘ç½‘ç»œä¼ è¾“æ•°æ®é‡ï¼Œå¾…æ‰‹æœºç«¯ä¸‹è½½å®Œæˆåè¢«è¿˜åŸä¸ºåŸå§‹æ–‡ä»¶ã€‚ ä¹Ÿå°±æ˜¯è¯´ raw size å°±æ˜¯apkçš„æœ¬èº«å¤§å°ï¼ˆå½“ç„¶ä¹Ÿå¹¶éè§£å‹åçš„ç›®å½•å¤§å°ï¼‰ï¼› download size å°±æ˜¯å®é™…ä¸‹è½½æ—¶æ¶ˆè€—çš„æµé‡å¤§å°ã€‚ "},"src/ap.html":{"url":"src/ap.html","title":".ap_ æ–‡ä»¶çš„ä½œç”¨","keywords":"","body":" AAPT2 å°†AAPT å¯¹èµ„æºçš„ç¼–è¯‘æ‹†åˆ†ç»†åŒ–ä¸ºäº† compile å’Œ link ä¸¤ä¸ªæ­¥éª¤ï¼Œä»¥æ›´å¥½åœ°æå‡ç¼–è¯‘é€Ÿåº¦ï¼ˆå¢é‡ç¼–è¯‘ï¼‰ã€‚ å…¶ä¸­ link çš„ç»“æœé™¤äº†ç”Ÿæˆ R.java å¤–ï¼Œè¿˜ç”Ÿæˆäº† .ap_ äº§ç‰©ï¼ˆæœ¬è´¨ä¸Šæ˜¯zipï¼‰ï¼ŒåŒ…å« manifest æ¸…å•ã€æ‰€æœ‰èµ„æºæ–‡ä»¶ä»¥åŠèµ„æºç´¢å¼•è¡¨arscã€‚ å½“æ‰§è¡Œ package-task ç”Ÿæˆ .apk æ—¶å¹¶ä¸æ˜¯è§£å‹.apæ–‡ä»¶å¾—åˆ°ç›¸å…³èµ„æºå†ä¸dexé‡æ–°å‹ç¼©ï¼Œè€Œæ˜¯ä»¥ copy zip entry çš„å½¢å¼ç›´æ¥æ‹·è´åˆ°æœ€ç»ˆçš„apkæ–‡ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ.ap æ–‡ä»¶ä¸­å„ä¸ªentryçš„å‹ç¼©æ•ˆæœä¸apkä¸­ä¸€è‡´ã€‚ "}}